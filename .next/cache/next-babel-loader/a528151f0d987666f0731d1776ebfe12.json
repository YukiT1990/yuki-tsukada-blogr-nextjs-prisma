{"ast":null,"code":"var _jsxFileName = \"/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/userfeed/[userId].tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Layout from \"../../components/Layout\";\nimport Post from \"../../components/Post\";\nimport { useSession } from \"next-auth/client\";\nimport prisma from \"../../lib/prisma\";\nexport const getServerSideProps = async ({\n  params\n}) => {\n  console.log(\"keyword: \" + (params === null || params === void 0 ? void 0 : params.keyword));\n  const userId = Number(params === null || params === void 0 ? void 0 : params.userId);\n  const feedsR = await prisma.post.findMany({\n    where: {\n      authorId: userId,\n      published: true\n    },\n    include: {\n      author: {\n        select: {\n          name: true\n        }\n      }\n    }\n  });\n  let feedsU = JSON.parse(JSON.stringify(feedsR));\n  let feeds = feedsU.sort((p1, p2) => {\n    return p2.createdAt > p1.createdAt ? 1 : -1;\n  });\n  return {\n    props: {\n      feeds\n    }\n  };\n};\n\nconst UserFeed = props => {\n  const [session] = useSession();\n\n  if (!session) {\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 7\n      }\n    }, __jsx(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }\n    }, \"My Drafts\"), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }\n    }, \"You need to be authenticated to view this page.\"));\n  }\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3495282894\" + \" \" + \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-3495282894\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"My Drafts\"), __jsx(\"main\", {\n    className: \"jsx-3495282894\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, props.feeds.map(post => __jsx(\"div\", {\n    key: post.id,\n    className: \"jsx-3495282894\" + \" \" + \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, __jsx(Post, {\n    post: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }))))), __jsx(_JSXStyle, {\n    id: \"3495282894\",\n    __self: this\n  }, \".post.jsx-3495282894{background:white;-webkit-transition:box-shadow 0.1s ease-in;transition:box-shadow 0.1s ease-in;}.post.jsx-3495282894:hover{box-shadow:1px 1px 3px #aaa;}.post.jsx-3495282894+.post.jsx-3495282894{margin-top:2rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dWtpLnQvRGVza3RvcC9OZXh0SlNQcmFjdGljZS9ibG9nci1uZXh0anMtcHJpc21hL3BhZ2VzL3VzZXJmZWVkL1t1c2VySWRdLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEyRGtCLEFBRzRCLEFBS1csQUFJWixnQkFDbEIsQ0FUcUMsV0FLckMsbUVBSkEiLCJmaWxlIjoiL1VzZXJzL3l1a2kudC9EZXNrdG9wL05leHRKU1ByYWN0aWNlL2Jsb2dyLW5leHRqcy1wcmlzbWEvcGFnZXMvdXNlcmZlZWQvW3VzZXJJZF0udHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvTGF5b3V0XCI7XG5pbXBvcnQgUG9zdCwgeyBQb3N0UHJvcHMgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9Qb3N0XCI7XG5pbXBvcnQgeyB1c2VTZXNzaW9uLCBnZXRTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9jbGllbnRcIjtcbmltcG9ydCBwcmlzbWEgZnJvbSBcIi4uLy4uL2xpYi9wcmlzbWFcIjtcblxuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wczogR2V0U2VydmVyU2lkZVByb3BzID0gYXN5bmMgKHsgcGFyYW1zIH0pID0+IHtcbiAgY29uc29sZS5sb2coXCJrZXl3b3JkOiBcIiArIHBhcmFtcz8ua2V5d29yZCk7XG4gIGNvbnN0IHVzZXJJZCA9IE51bWJlcihwYXJhbXM/LnVzZXJJZCk7XG5cbiAgY29uc3QgZmVlZHNSID0gYXdhaXQgcHJpc21hLnBvc3QuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBhdXRob3JJZDogdXNlcklkLFxuICAgICAgcHVibGlzaGVkOiB0cnVlLFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgYXV0aG9yOiB7XG4gICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuICBsZXQgZmVlZHNVID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmZWVkc1IpKTtcbiAgbGV0IGZlZWRzID0gZmVlZHNVLnNvcnQoKHAxOiBQb3N0UHJvcHMsIHAyOiBQb3N0UHJvcHMpID0+IHtcbiAgICByZXR1cm4gcDIuY3JlYXRlZEF0ID4gcDEuY3JlYXRlZEF0ID8gMSA6IC0xO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBwcm9wczogeyBmZWVkcyB9LFxuICB9O1xufTtcblxudHlwZSBQcm9wcyA9IHtcbiAgZmVlZHM6IFBvc3RQcm9wc1tdO1xufTtcblxuY29uc3QgVXNlckZlZWQ6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBjb25zdCBbc2Vzc2lvbl0gPSB1c2VTZXNzaW9uKCk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXQ+XG4gICAgICAgIDxoMT5NeSBEcmFmdHM8L2gxPlxuICAgICAgICA8ZGl2PllvdSBuZWVkIHRvIGJlIGF1dGhlbnRpY2F0ZWQgdG8gdmlldyB0aGlzIHBhZ2UuPC9kaXY+XG4gICAgICA8L0xheW91dD5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlXCI+XG4gICAgICAgIDxoMT5NeSBEcmFmdHM8L2gxPlxuICAgICAgICA8bWFpbj5cbiAgICAgICAgICB7cHJvcHMuZmVlZHMubWFwKChwb3N0KSA9PiAoXG4gICAgICAgICAgICA8ZGl2IGtleT17cG9zdC5pZH0gY2xhc3NOYW1lPVwicG9zdFwiPlxuICAgICAgICAgICAgICA8UG9zdCBwb3N0PXtwb3N0fSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvbWFpbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucG9zdCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAwLjFzIGVhc2UtaW47XG4gICAgICAgIH1cblxuICAgICAgICAucG9zdDpob3ZlciB7XG4gICAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCAzcHggI2FhYTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0ICsgLnBvc3Qge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDJyZW07XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJGZWVkO1xuIl19 */\\n/*@ sourceURL=/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/userfeed/[userId].tsx */\"));\n};\n\nexport default UserFeed;","map":{"version":3,"sources":["/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/userfeed/[userId].tsx"],"names":["React","Layout","Post","useSession","prisma","getServerSideProps","params","console","log","keyword","userId","Number","feedsR","post","findMany","where","authorId","published","include","author","select","name","feedsU","JSON","parse","stringify","feeds","sort","p1","p2","createdAt","props","UserFeed","session","map","id"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAgC,uBAAhC;AACA,SAASC,UAAT,QAAuC,kBAAvC;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AAEA,OAAO,MAAMC,kBAAsC,GAAG,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAsB;AAC1EC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAcF,MAAd,aAAcA,MAAd,uBAAcA,MAAM,CAAEG,OAAtB,CAAZ;AACA,QAAMC,MAAM,GAAGC,MAAM,CAACL,MAAD,aAACA,MAAD,uBAACA,MAAM,CAAEI,MAAT,CAArB;AAEA,QAAME,MAAM,GAAG,MAAMR,MAAM,CAACS,IAAP,CAAYC,QAAZ,CAAqB;AACxCC,IAAAA,KAAK,EAAE;AACLC,MAAAA,QAAQ,EAAEN,MADL;AAELO,MAAAA,SAAS,EAAE;AAFN,KADiC;AAKxCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AADF;AADD;AAL+B,GAArB,CAArB;AAWA,MAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeb,MAAf,CAAX,CAAb;AACA,MAAIc,KAAK,GAAGJ,MAAM,CAACK,IAAP,CAAY,CAACC,EAAD,EAAgBC,EAAhB,KAAkC;AACxD,WAAOA,EAAE,CAACC,SAAH,GAAeF,EAAE,CAACE,SAAlB,GAA8B,CAA9B,GAAkC,CAAC,CAA1C;AACD,GAFW,CAAZ;AAGA,SAAO;AACLC,IAAAA,KAAK,EAAE;AAAEL,MAAAA;AAAF;AADF,GAAP;AAGD,CAtBM;;AA4BP,MAAMM,QAAyB,GAAID,KAAD,IAAW;AAC3C,QAAM,CAACE,OAAD,IAAY9B,UAAU,EAA5B;;AAEA,MAAI,CAAC8B,OAAL,EAAc;AACZ,WACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAFF,CADF;AAMD;;AAED,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,KAAK,CAACL,KAAN,CAAYQ,GAAZ,CAAiBrB,IAAD,IACf;AAAK,IAAA,GAAG,EAAEA,IAAI,CAACsB,EAAf;AAAA,wCAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAEtB,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADD,CADH,CAFF,CADF;AAAA;AAAA;AAAA,6rGADF;AA4BD,CAxCD;;AA0CA,eAAemB,QAAf","sourcesContent":["import React from \"react\";\nimport { GetServerSideProps } from \"next\";\nimport Layout from \"../../components/Layout\";\nimport Post, { PostProps } from \"../../components/Post\";\nimport { useSession, getSession } from \"next-auth/client\";\nimport prisma from \"../../lib/prisma\";\n\nexport const getServerSideProps: GetServerSideProps = async ({ params }) => {\n  console.log(\"keyword: \" + params?.keyword);\n  const userId = Number(params?.userId);\n\n  const feedsR = await prisma.post.findMany({\n    where: {\n      authorId: userId,\n      published: true,\n    },\n    include: {\n      author: {\n        select: { name: true },\n      },\n    },\n  });\n  let feedsU = JSON.parse(JSON.stringify(feedsR));\n  let feeds = feedsU.sort((p1: PostProps, p2: PostProps) => {\n    return p2.createdAt > p1.createdAt ? 1 : -1;\n  });\n  return {\n    props: { feeds },\n  };\n};\n\ntype Props = {\n  feeds: PostProps[];\n};\n\nconst UserFeed: React.FC<Props> = (props) => {\n  const [session] = useSession();\n\n  if (!session) {\n    return (\n      <Layout>\n        <h1>My Drafts</h1>\n        <div>You need to be authenticated to view this page.</div>\n      </Layout>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"page\">\n        <h1>My Drafts</h1>\n        <main>\n          {props.feeds.map((post) => (\n            <div key={post.id} className=\"post\">\n              <Post post={post} />\n            </div>\n          ))}\n        </main>\n      </div>\n      <style jsx>{`\n        .post {\n          background: white;\n          transition: box-shadow 0.1s ease-in;\n        }\n\n        .post:hover {\n          box-shadow: 1px 1px 3px #aaa;\n        }\n\n        .post + .post {\n          margin-top: 2rem;\n        }\n      `}</style>\n    </Layout>\n  );\n};\n\nexport default UserFeed;\n"]},"metadata":{},"sourceType":"module"}