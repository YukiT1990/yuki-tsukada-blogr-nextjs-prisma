{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/search/[keyword].tsx\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Layout from \"../../components/Layout\";\nimport Post from \"../../components/Post\";\nimport Link from \"next/link\";\n\nvar Search = function Search(props) {\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-3495282894\" + \" \" + \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, \"Search Result\"), __jsx(\"main\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, props.users.length == 0 && __jsx(\"p\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 39\n    }\n  }, \"No match for users.\"), props.users.length > 0 && props.users.map(function (user) {\n    return __jsx(\"div\", {\n      key: user.id,\n      className: \"jsx-3495282894\" + \" \" + \"post\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, __jsx(Link, {\n      href: \"/userfeed/\".concat(user.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, __jsx(\"p\", {\n      className: \"jsx-3495282894\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }\n    }, user.name)));\n  }), props.posts.length == 0 && __jsx(\"p\", {\n    className: \"jsx-3495282894\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 39\n    }\n  }, \"No match for posts.\"), props.posts.length > 0 && props.posts.map(function (post) {\n    return __jsx(\"div\", {\n      key: post.id,\n      className: \"jsx-3495282894\" + \" \" + \"post\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, __jsx(Post, {\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }));\n  }))), __jsx(_JSXStyle, {\n    id: \"3495282894\",\n    __self: _this\n  }, \".post.jsx-3495282894{background:white;-webkit-transition:box-shadow 0.1s ease-in;transition:box-shadow 0.1s ease-in;}.post.jsx-3495282894:hover{box-shadow:1px 1px 3px #aaa;}.post.jsx-3495282894+.post.jsx-3495282894{margin-top:2rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dWtpLnQvRGVza3RvcC9OZXh0SlNQcmFjdGljZS9ibG9nci1uZXh0anMtcHJpc21hL3BhZ2VzL3NlYXJjaC9ba2V5d29yZF0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1Ga0IsQUFHNEIsQUFLVyxBQUlaLGdCQUNsQixDQVRxQyxXQUtyQyxtRUFKQSIsImZpbGUiOiIvVXNlcnMveXVraS50L0Rlc2t0b3AvTmV4dEpTUHJhY3RpY2UvYmxvZ3ItbmV4dGpzLXByaXNtYS9wYWdlcy9zZWFyY2gvW2tleXdvcmRdLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvTGF5b3V0XCI7XG5pbXBvcnQgUm91dGVyIGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHByaXNtYSBmcm9tIFwiLi4vLi4vbGliL3ByaXNtYVwiO1xuaW1wb3J0IFBvc3QsIHsgUG9zdFByb3BzIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvUG9zdFwiO1xuaW1wb3J0IHsgVXNlclByb3BzIH0gZnJvbSBcIi4uL3VwZGF0ZS11c2VyXCI7XG5pbXBvcnQgeyBzdHJpbmdpZnkgfSBmcm9tIFwicXVlcnlzdHJpbmdcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcblxuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wczogR2V0U2VydmVyU2lkZVByb3BzID0gYXN5bmMgKHsgcGFyYW1zIH0pID0+IHtcbiAgLy8gY29uc29sZS5sb2coXCJrZXl3b3JkOiBcIiArIHBhcmFtcz8ua2V5d29yZCk7XG4gIGNvbnN0IHNlYXJjaEtleXdvcmQ6IHN0cmluZyA9IHBhcmFtcz8ua2V5d29yZC50b1N0cmluZygpO1xuXG4gIGNvbnN0IHVzZXJzUiA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBjb250YWluczogc2VhcmNoS2V5d29yZCxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QgdXNlcnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJzUikpO1xuXG4gIGNvbnN0IHBvc3RzUiA9IGF3YWl0IHByaXNtYS5wb3N0LmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgT1I6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICBjb250YWluczogc2VhcmNoS2V5d29yZCxcbiAgICAgICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgY29udGFpbnM6IHNlYXJjaEtleXdvcmQsXG4gICAgICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBhdXRob3I6IHtcbiAgICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIGNvbnN0IHBvc3RzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwb3N0c1IpKTtcbiAgcmV0dXJuIHtcbiAgICBwcm9wczogeyB1c2VycywgcG9zdHMgfSxcbiAgfTtcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHVzZXJzOiBVc2VyUHJvcHNbXTtcbiAgcG9zdHM6IFBvc3RQcm9wc1tdO1xufTtcblxuY29uc3QgU2VhcmNoOiBSZWFjdC5GQzxQcm9wcz4gPSAocHJvcHMpID0+IHtcbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlXCI+XG4gICAgICAgIDxoMT5TZWFyY2ggUmVzdWx0PC9oMT5cbiAgICAgICAgPG1haW4+XG4gICAgICAgICAge3Byb3BzLnVzZXJzLmxlbmd0aCA9PSAwICYmIDxwPk5vIG1hdGNoIGZvciB1c2Vycy48L3A+fVxuICAgICAgICAgIHtwcm9wcy51c2Vycy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICBwcm9wcy51c2Vycy5tYXAoKHVzZXIpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e3VzZXIuaWR9IGNsYXNzTmFtZT1cInBvc3RcIj5cbiAgICAgICAgICAgICAgICA8TGluayBocmVmPXtgL3VzZXJmZWVkLyR7dXNlci5pZH1gfT5cbiAgICAgICAgICAgICAgICAgIDxwPnt1c2VyLm5hbWV9PC9wPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICB7cHJvcHMucG9zdHMubGVuZ3RoID09IDAgJiYgPHA+Tm8gbWF0Y2ggZm9yIHBvc3RzLjwvcD59XG4gICAgICAgICAge3Byb3BzLnBvc3RzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIHByb3BzLnBvc3RzLm1hcCgocG9zdCkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17cG9zdC5pZH0gY2xhc3NOYW1lPVwicG9zdFwiPlxuICAgICAgICAgICAgICAgIDxQb3N0IHBvc3Q9e3Bvc3R9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvbWFpbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5wb3N0IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBib3gtc2hhZG93IDAuMXMgZWFzZS1pbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0OmhvdmVyIHtcbiAgICAgICAgICBib3gtc2hhZG93OiAxcHggMXB4IDNweCAjYWFhO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBvc3QgKyAucG9zdCB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMnJlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoO1xuIl19 */\\n/*@ sourceURL=/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/search/[keyword].tsx */\"));\n};\n\n_c = Search;\nexport var __N_SSP = true;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/yuki.t/Desktop/NextJSPractice/blogr-nextjs-prisma/pages/search/[keyword].tsx"],"names":["React","Layout","Post","Link","Search","props","users","length","map","user","id","name","posts","post"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAgC,OAAhC;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AAGA,OAAOC,IAAP,MAAgC,uBAAhC;AAGA,OAAOC,IAAP,MAAiB,WAAjB;;AAkDA,IAAMC,MAAuB,GAAG,SAA1BA,MAA0B,CAACC,KAAD,EAAW;AACzC,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA,wCAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,KAAK,CAACC,KAAN,CAAYC,MAAZ,IAAsB,CAAtB,IAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAD9B,EAEGF,KAAK,CAACC,KAAN,CAAYC,MAAZ,GAAqB,CAArB,IACCF,KAAK,CAACC,KAAN,CAAYE,GAAZ,CAAgB,UAACC,IAAD;AAAA,WACd;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACC,EAAf;AAAA,0CAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,sBAAeD,IAAI,CAACC,EAApB,CAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAID,IAAI,CAACE,IAAT,CADF,CADF,CADc;AAAA,GAAhB,CAHJ,EAUGN,KAAK,CAACO,KAAN,CAAYL,MAAZ,IAAsB,CAAtB,IAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAV9B,EAWGF,KAAK,CAACO,KAAN,CAAYL,MAAZ,GAAqB,CAArB,IACCF,KAAK,CAACO,KAAN,CAAYJ,GAAZ,CAAgB,UAACK,IAAD;AAAA,WACd;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACH,EAAf;AAAA,0CAA6B,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAEG,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADc;AAAA,GAAhB,CAZJ,CAFF,CADF;AAAA;AAAA;AAAA,orIADF;AAwCD,CAzCD;;KAAMT,M;;AA2CN,eAAeA,MAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { GetServerSideProps } from \"next\";\nimport Layout from \"../../components/Layout\";\nimport Router from \"next/router\";\nimport prisma from \"../../lib/prisma\";\nimport Post, { PostProps } from \"../../components/Post\";\nimport { UserProps } from \"../update-user\";\nimport { stringify } from \"querystring\";\nimport Link from \"next/link\";\n\nexport const getServerSideProps: GetServerSideProps = async ({ params }) => {\n  // console.log(\"keyword: \" + params?.keyword);\n  const searchKeyword: string = params?.keyword.toString();\n\n  const usersR = await prisma.user.findMany({\n    where: {\n      name: {\n        contains: searchKeyword,\n        mode: \"insensitive\",\n      },\n    },\n  });\n  const users = JSON.parse(JSON.stringify(usersR));\n\n  const postsR = await prisma.post.findMany({\n    where: {\n      OR: [\n        {\n          title: {\n            contains: searchKeyword,\n            mode: \"insensitive\",\n          },\n        },\n        {\n          content: {\n            contains: searchKeyword,\n            mode: \"insensitive\",\n          },\n        },\n      ],\n    },\n    include: {\n      author: {\n        select: { name: true },\n      },\n    },\n  });\n  const posts = JSON.parse(JSON.stringify(postsR));\n  return {\n    props: { users, posts },\n  };\n};\n\ntype Props = {\n  users: UserProps[];\n  posts: PostProps[];\n};\n\nconst Search: React.FC<Props> = (props) => {\n  return (\n    <Layout>\n      <div className=\"page\">\n        <h1>Search Result</h1>\n        <main>\n          {props.users.length == 0 && <p>No match for users.</p>}\n          {props.users.length > 0 &&\n            props.users.map((user) => (\n              <div key={user.id} className=\"post\">\n                <Link href={`/userfeed/${user.id}`}>\n                  <p>{user.name}</p>\n                </Link>\n              </div>\n            ))}\n          {props.posts.length == 0 && <p>No match for posts.</p>}\n          {props.posts.length > 0 &&\n            props.posts.map((post) => (\n              <div key={post.id} className=\"post\">\n                <Post post={post} />\n              </div>\n            ))}\n        </main>\n      </div>\n\n      <style jsx>{`\n        .post {\n          background: white;\n          transition: box-shadow 0.1s ease-in;\n        }\n\n        .post:hover {\n          box-shadow: 1px 1px 3px #aaa;\n        }\n\n        .post + .post {\n          margin-top: 2rem;\n        }\n      `}</style>\n    </Layout>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}